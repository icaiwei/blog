(window.webpackJsonp=window.webpackJsonp||[]).push([[238],{2914:function(n,s,a){"use strict";a.r(s);var t=a(0),e=Object(t.a)({},(function(){var n=this,s=n._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("h2",{attrs:{id:"菜单分类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#菜单分类"}},[n._v("#")]),n._v(" 菜单分类")]),n._v(" "),s("ul",[s("li",[n._v("窗口的顶层菜单")]),n._v(" "),s("li",[n._v("弹出式菜单")]),n._v(" "),s("li",[n._v("系统菜单")])]),n._v(" "),s("p",[n._v("​\tHMENU类型表示菜单，ID表示菜单项。")]),n._v(" "),s("h2",{attrs:{id:"资源相关"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#资源相关"}},[n._v("#")]),n._v(" 资源相关")]),n._v(" "),s("ul",[s("li",[n._v("资源脚本文件：*rc文件")]),n._v(" "),s("li",[n._v("编译器：RC.exe")])]),n._v(" "),s("h2",{attrs:{id:"菜单资源的使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#菜单资源的使用"}},[n._v("#")]),n._v(" 菜单资源的使用")]),n._v(" "),s("ul",[s("li",[s("p",[n._v("添加菜单资源")])]),n._v(" "),s("li",[s("p",[n._v("加载菜单资源")]),n._v(" "),s("ul",[s("li",[s("p",[n._v("注册窗口类时设置菜单")])]),n._v(" "),s("li",[s("p",[n._v("创建窗口传参设置菜单")])]),n._v(" "),s("li",[s("p",[n._v("在主窗口WM_CREATE消息中利用SetMenu函数设置菜单")])]),n._v(" "),s("li",[s("p",[n._v("HMENU LoadMenu(")]),n._v(" "),s("p",[n._v("​\tHINSTANCE hInstance,")]),n._v(" "),s("p",[n._v("​\tLPCTSTR lpMenuName")]),n._v(" "),s("p",[n._v(");")])])])])]),n._v(" "),s("h2",{attrs:{id:"命令消息处理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#命令消息处理"}},[n._v("#")]),n._v(" 命令消息处理")]),n._v(" "),s("p",[n._v("wParam:")]),n._v(" "),s("p",[n._v("​\tHIWORD-对于菜单为0")]),n._v(" "),s("p",[n._v("​\tLOWORD-菜单项的ID")]),n._v(" "),s("p",[n._v("lParam:")]),n._v(" "),s("p",[n._v("​\t对于菜单为0")]),n._v(" "),s("h2",{attrs:{id:"上下文菜单"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#上下文菜单"}},[n._v("#")]),n._v(" 上下文菜单")]),n._v(" "),s("ul",[s("li",[n._v("显示上下文菜单")])]),n._v(" "),s("div",{staticClass:"language-C++ line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("BOOL TrackPopupMenu(\n\tHMENU hMenu,\t\t\t//菜单句柄\n    UINT uFlags,\t\t\t//显示方式\n    int x,\t\t\t\t\t//水平位置，屏幕坐标系\n    int y,\t\t\t\t\t//垂直位置，屏幕坐标系\n    int nReserved,\t\t\t//保留，必须为0\n    HWND hWnd,\t\t\t\t//句柄\n    CONST RECT *prcRect\t\t//NULL，忽略\n);\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br")])]),s("ul",[s("li",[n._v("WM_RBUTTONUP")])]),n._v(" "),s("p",[n._v("​\t\t鼠标右键弹起消息为窗口坐标系坐标，将其转换为屏幕坐标系ClientToScreen")]),n._v(" "),s("ul",[s("li",[n._v("WM_CONTEXTMENU")])]),n._v(" "),s("p",[n._v("​\t\twParam:右键点击的窗口句柄")]),n._v(" "),s("p",[n._v("​\t\tlParam:LOWROD X坐标，屏幕坐标系，HIWORD Y坐标，屏幕坐标系")]),n._v(" "),s("p",[n._v("​\t\tWM_CONTEXTMENU消息是在WM_RBUTTONUP消息之后产生")]),n._v(" "),s("h2",{attrs:{id:"代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#代码"}},[n._v("#")]),n._v(" 代码")]),n._v(" "),s("div",{staticClass:"language-C++ line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('//\n// Created by JS-001 on 2022/10/26 0026.\n//\n#include <Windows.h>\n#include <stdio.h>\n#include "resource.h"\n\nHANDLE g_hOutput = 0;//接收标准输出句柄\nHINSTANCE g_hInstance = 0;//接收标准输出句柄\n\nvoid OnCommand(HWND hWnd, WPARAM wParam) {\n\tswitch (LOWORD(wParam))\n\t{\n\tcase ID_NEW:\n\t\tMessageBox(hWnd, "新建被点击", "info", MB_OK);\n\t\tbreak;\n\tcase ID_EXIT:\n\t\tMessageBox(hWnd, "退出被点击", "info", MB_OK);\n\t\tbreak;\n\tcase ID_ABOUT:\n\t\tMessageBox(hWnd, "关于被点击", "info", MB_OK);\n\t\tbreak;\n\tdefault:\n\t\tbreak;\n\t}\n}\nvoid OnContextMenu(HWND hWnd, LPARAM lParam) {\n\tHMENU hMain = LoadMenu(g_hInstance, (CHAR*)IDR_MENU1);\n\tHMENU hPopup = GetSubMenu(hMain,0);\n\tTrackPopupMenu(hPopup, TPM_LEFTALIGN | TPM_TOPALIGN, \n\t\t\t\t\tLOWORD(lParam),HIWORD(lParam),0,hWnd,NULL);\n}\n\n//窗口处理函数\nLRESULT CALLBACK WndProc(HWND hWnd, UINT msgID, WPARAM wParam, LPARAM lParam) {\n\tswitch (msgID)\n\t{\n\tcase WM_CONTEXTMENU:\n\t\tOnContextMenu(hWnd,lParam);\n\t\tbreak;\n\tcase WM_COMMAND:\n\t\tOnCommand(hWnd, wParam);\n\t\tbreak;\n\tcase WM_DESTROY:\n\t\tPostQuitMessage(0);//可以使GetMessage函数返回0\n\t\tbreak;\n\t}\n\treturn DefWindowProc(hWnd, msgID, wParam, lParam);\n}\n\n//入口函数\nint CALLBACK WinMain(HINSTANCE hInstance, HINSTANCE hPreInstance, LPSTR lpCmdLine, int nCmdShow) {\n\t//增加DOS\n\tAllocConsole();\n\tg_hOutput = GetStdHandle(STD_OUTPUT_HANDLE);\n\t// 注册窗口类\n\tWNDCLASS wc = { 0 };\n\twc.cbClsExtra = 0;\n\twc.cbWndExtra = 0;\n\twc.hbrBackground = (HBRUSH)(COLOR_WINDOW + 1);\n\twc.hCursor = NULL;\n\twc.hIcon = NULL;\n\twc.hInstance = hInstance;\n\twc.lpfnWndProc = WndProc;\n\twc.lpszClassName = "Main";\n\t//wc.lpszMenuName = (char*)IDR_MENU1;\n\twc.lpszMenuName = NULL;\n\twc.style = CS_HREDRAW | CS_VREDRAW;\n\n\tRegisterClass(&wc);\n\n\t//在内存中创建窗口\n\tchar* pszText = (char*)"hello data";\n\tHMENU hMenu = LoadMenu(hInstance, (char*)IDR_MENU1);\n\tHWND hWnd = CreateWindowEx(0, "Main", "Window", WS_OVERLAPPEDWINDOW, 100, 100, 500, 500,NULL, hMenu, hInstance, pszText);\n\t//显示窗口\n\tShowWindow(hWnd, SW_SHOW);\n\tUpdateWindow(hWnd);\n\t// 消息循环，避免窗口消失\n\tMSG nMsg = { 0 };\n\twhile (GetMessage(&nMsg, NULL, 0, 0))\n\t{\n\t\tTranslateMessage(&nMsg);\n\t\t//将消息交给窗口处理函数\n\t\tDispatchMessage(&nMsg);\n\t}\n\treturn 0;\n\n}\n\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br"),s("span",{staticClass:"line-number"},[n._v("34")]),s("br"),s("span",{staticClass:"line-number"},[n._v("35")]),s("br"),s("span",{staticClass:"line-number"},[n._v("36")]),s("br"),s("span",{staticClass:"line-number"},[n._v("37")]),s("br"),s("span",{staticClass:"line-number"},[n._v("38")]),s("br"),s("span",{staticClass:"line-number"},[n._v("39")]),s("br"),s("span",{staticClass:"line-number"},[n._v("40")]),s("br"),s("span",{staticClass:"line-number"},[n._v("41")]),s("br"),s("span",{staticClass:"line-number"},[n._v("42")]),s("br"),s("span",{staticClass:"line-number"},[n._v("43")]),s("br"),s("span",{staticClass:"line-number"},[n._v("44")]),s("br"),s("span",{staticClass:"line-number"},[n._v("45")]),s("br"),s("span",{staticClass:"line-number"},[n._v("46")]),s("br"),s("span",{staticClass:"line-number"},[n._v("47")]),s("br"),s("span",{staticClass:"line-number"},[n._v("48")]),s("br"),s("span",{staticClass:"line-number"},[n._v("49")]),s("br"),s("span",{staticClass:"line-number"},[n._v("50")]),s("br"),s("span",{staticClass:"line-number"},[n._v("51")]),s("br"),s("span",{staticClass:"line-number"},[n._v("52")]),s("br"),s("span",{staticClass:"line-number"},[n._v("53")]),s("br"),s("span",{staticClass:"line-number"},[n._v("54")]),s("br"),s("span",{staticClass:"line-number"},[n._v("55")]),s("br"),s("span",{staticClass:"line-number"},[n._v("56")]),s("br"),s("span",{staticClass:"line-number"},[n._v("57")]),s("br"),s("span",{staticClass:"line-number"},[n._v("58")]),s("br"),s("span",{staticClass:"line-number"},[n._v("59")]),s("br"),s("span",{staticClass:"line-number"},[n._v("60")]),s("br"),s("span",{staticClass:"line-number"},[n._v("61")]),s("br"),s("span",{staticClass:"line-number"},[n._v("62")]),s("br"),s("span",{staticClass:"line-number"},[n._v("63")]),s("br"),s("span",{staticClass:"line-number"},[n._v("64")]),s("br"),s("span",{staticClass:"line-number"},[n._v("65")]),s("br"),s("span",{staticClass:"line-number"},[n._v("66")]),s("br"),s("span",{staticClass:"line-number"},[n._v("67")]),s("br"),s("span",{staticClass:"line-number"},[n._v("68")]),s("br"),s("span",{staticClass:"line-number"},[n._v("69")]),s("br"),s("span",{staticClass:"line-number"},[n._v("70")]),s("br"),s("span",{staticClass:"line-number"},[n._v("71")]),s("br"),s("span",{staticClass:"line-number"},[n._v("72")]),s("br"),s("span",{staticClass:"line-number"},[n._v("73")]),s("br"),s("span",{staticClass:"line-number"},[n._v("74")]),s("br"),s("span",{staticClass:"line-number"},[n._v("75")]),s("br"),s("span",{staticClass:"line-number"},[n._v("76")]),s("br"),s("span",{staticClass:"line-number"},[n._v("77")]),s("br"),s("span",{staticClass:"line-number"},[n._v("78")]),s("br"),s("span",{staticClass:"line-number"},[n._v("79")]),s("br"),s("span",{staticClass:"line-number"},[n._v("80")]),s("br"),s("span",{staticClass:"line-number"},[n._v("81")]),s("br"),s("span",{staticClass:"line-number"},[n._v("82")]),s("br"),s("span",{staticClass:"line-number"},[n._v("83")]),s("br"),s("span",{staticClass:"line-number"},[n._v("84")]),s("br"),s("span",{staticClass:"line-number"},[n._v("85")]),s("br"),s("span",{staticClass:"line-number"},[n._v("86")]),s("br"),s("span",{staticClass:"line-number"},[n._v("87")]),s("br"),s("span",{staticClass:"line-number"},[n._v("88")]),s("br"),s("span",{staticClass:"line-number"},[n._v("89")]),s("br"),s("span",{staticClass:"line-number"},[n._v("90")]),s("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);