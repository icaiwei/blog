(window.webpackJsonp=window.webpackJsonp||[]).push([[190],{2516:function(s,a,e){s.exports=e.p+"assets/img/image-20230628195422020.e46ce0e4.png"},2976:function(s,a,e){"use strict";e.r(a);var n=e(0),t=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"frp-服务端搭建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#frp-服务端搭建"}},[s._v("#")]),s._v(" frp 服务端搭建")]),s._v(" "),a("h3",{attrs:{id:"下载安装包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下载安装包"}},[s._v("#")]),s._v(" 下载安装包")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("wget https://github.com/fatedier/frp/releases/download/v0.27.0/frp_0.27.0_linux_amd64.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"解压安装包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解压安装包"}},[s._v("#")]),s._v(" 解压安装包")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("tar -zxvf frp_0.27.0_linux_amd64.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"修改配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改配置文件"}},[s._v("#")]),s._v(" 修改配置文件")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cd frp_0.27.0_linux_amd64\nvim frps.ini\n\n[common]                                                                                                                  \nbind_port = 7100                                                                                                          \nvhost_http_port = 7200\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"启动-frp-服务端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动-frp-服务端"}},[s._v("#")]),s._v(" 启动 frp 服务端")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("./frps -c frps.ini\n2019/06/15 16:42:02 [I] [service.go:139] frps tcp listen on 0.0.0.0:7100\n2019/06/15 16:42:02 [I] [service.go:181] http service listen on 0.0.0.0:7200\n2019/06/15 16:42:02 [I] [root.go:204] Start frps success\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h2",{attrs:{id:"frp-客户端搭建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#frp-客户端搭建"}},[s._v("#")]),s._v(" frp 客户端搭建")]),s._v(" "),a("h2",{attrs:{id:"下载安装包-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下载安装包-2"}},[s._v("#")]),s._v(" 下载安装包")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("wget https://github.com/fatedier/frp/releases/download/v0.27.0/frp_0.27.0_darwin_amd64.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"解压安装包-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解压安装包-2"}},[s._v("#")]),s._v(" 解压安装包")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("tar -zxvf frp_0.27.0_darwin_amd64.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"修改配置文件-配置服务端-ip-端口及监听的域名信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改配置文件-配置服务端-ip-端口及监听的域名信息"}},[s._v("#")]),s._v(" 修改配置文件，配置服务端 ip 端口及监听的域名信息")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cd frp_0.27.0_darwin_amd64\nvim frpc.ini\n\n[common]\nserver_addr = 120.92.169.103\nserver_port = 7100\n\n[web]\ntype = http\nlocal_port = 8080\ncustom_domains = oauth.xkcoding.com\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h3",{attrs:{id:"启动-frp-客户端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动-frp-客户端"}},[s._v("#")]),s._v(" 启动 frp 客户端")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("./frpc -c frpc.ini\n2019/06/15 16:48:52 [I] [service.go:221] login to server success, get run id [8bb83bae5c58afe6], server udp port [0]\n2019/06/15 16:48:52 [I] [proxy_manager.go:137] [8bb83bae5c58afe6] proxy added: [web]\n2019/06/15 16:48:52 [I] [control.go:144] [web] start proxy success\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"配置域名解析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置域名解析"}},[s._v("#")]),s._v(" 配置域名解析")]),s._v(" "),a("p",[s._v("前往阿里云 DNS 解析，将域名解析到我们的公网服务器上，比如我的就是将 "),a("code",[s._v("oauth.xkcoding.com -> 120.92.169.103")])]),s._v(" "),a("p",[a("img",{attrs:{src:e(2516),alt:"image-20230628195422020"}})]),s._v(" "),a("h3",{attrs:{id:"nginx-代理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx-代理"}},[s._v("#")]),s._v(" nginx 代理")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("\nserver {\n    listen       80;\n    server_name  oauth.xkcoding.com;         \n                                                                        \n    location / {\n        proxy_pass http://127.0.0.1:7200;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header Host $http_host;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_set_header   X-Real-IP        $remote_addr;                                                                 \n        proxy_buffering off;                                                                                              \n        sendfile off;                                                                                                     \n        proxy_max_temp_file_size 0;                                                                                       \n        client_max_body_size       10m;                                                                                   \n        client_body_buffer_size    128k;                                                                                  \n        proxy_connect_timeout      90;                                                                                    \n        proxy_send_timeout         90;                                                                                    \n        proxy_read_timeout         90;                                                                                    \n        proxy_temp_file_write_size 64k;                                                                                   \n        proxy_http_version 1.1;                                                                                           \n        proxy_request_buffering off; \n    }\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br")])]),a("h4",{attrs:{id:"测试配置文件是否有问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试配置文件是否有问题"}},[s._v("#")]),s._v(" 测试配置文件是否有问题")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("nginx -t\nnginx: the configuration file /etc/nginx/nginx.conf syntax is ok\nnginx: configuration file /etc/nginx/nginx.conf test is successful\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h4",{attrs:{id:"重新加载配置文件-使其生效"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重新加载配置文件-使其生效"}},[s._v("#")]),s._v(" 重新加载配置文件，使其生效")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("nginx -s reload\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("现在当我们在浏览器输入 oauth.xkcoding.com 的时候，网络流量其实会经历以下几个步骤：\n\n通过之前配的 DNS 域名解析会访问到我们的公网服务器 120.92.169.103 的 80 端口\n再经过 nginx，代理到本地的 7200 端口\n再经过 frp 穿透到我们的 Mac 电脑的 8080 端口\n此时 8080 就是我们的应用程序端口\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);