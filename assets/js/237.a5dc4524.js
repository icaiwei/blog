(window.webpackJsonp=window.webpackJsonp||[]).push([[237],{2912:function(n,s,a){"use strict";a.r(s);var t=a(0),e=Object(t.a)({},(function(){var n=this,s=n._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("h2",{attrs:{id:"定时器消息介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#定时器消息介绍"}},[n._v("#")]),n._v(" 定时器消息介绍")]),n._v(" "),s("ul",[s("li",[s("p",[n._v("产生时间-在程序中创建定时器，当到达时间间隔时，定时器会向程序发送一个WM_TIMER消息。定时器的精度时ms，但是准确度很低。")]),n._v(" "),s("p",[n._v("例如设置时间间隔为1000ms，但是会在非1000ms到达消息。")])]),n._v(" "),s("li",[s("p",[n._v("附带信息-wParam:定时器ID，lParam:定时器处理函数的指针。")])])]),n._v(" "),s("h2",{attrs:{id:"创建和销毁定时器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建和销毁定时器"}},[n._v("#")]),n._v(" 创建和销毁定时器")]),n._v(" "),s("div",{staticClass:"language-C++ line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("// 创建定时器\nUINT_PTR SetTimer(\n\tHWND hWnd,\t\t\t//窗口句柄\n    UINT_PTR nIDEvent,\t//定时器ID\n    UINT uElapse,\t\t//时间间隔ms\n    TIMERPROC lpTimerFunc\t//定时器处理函数指针，一般不用，为NULL\n);\t//创建成功，返回非0\n// 关闭定时器\nBOOL KillTimer(\n\tHWND hWnd,\n    UINT_PTR uIDEvent\n);\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br")])]),s("h2",{attrs:{id:"代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#代码"}},[n._v("#")]),n._v(" 代码")]),n._v(" "),s("div",{staticClass:"language-C++ line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('/**\n*   Author:icaiwei\n*   Date:2022/11/6 0006\n*/\n\n#include <Windows.h>\n#include <cstdio>\n\nHANDLE g_hOutput = nullptr;//接收标准输出句柄\n\nvoid OnTimer(HWND pHwnd, WPARAM param);\n\n//窗口处理函数\nLRESULT CALLBACK WndProc(HWND hWnd, UINT msgID, WPARAM wParam, LPARAM lParam) {\n    switch (msgID)\n    {\n        case WM_CREATE:\n            SetTimer(hWnd,1,1000,nullptr);\n            SetTimer(hWnd,2,2000,nullptr);\n            break;\n        case WM_TIMER:\n            OnTimer(hWnd,wParam);\n            break;\n        case WM_DESTROY:\n            PostQuitMessage(0);//可以使GetMessage函数返回0\n            break;\n        default:\n            break;\n    }\n    return DefWindowProc(hWnd, msgID, wParam, lParam);\n}\n\nvoid OnTimer(HWND hWnd, WPARAM wParam) {\n    char szText[256];\n    sprintf_s(szText,"WM_TIMER:定时器ID=%d\\n",wParam);\n    WriteConsole(g_hOutput,szText, strlen(szText),nullptr, nullptr);\n}\n\n//入口函数\nint CALLBACK WinMain(HINSTANCE hInstance, HINSTANCE hPreInstance, LPSTR lpCmdLine, int nCmdShow) {\n    //增加DOS\n    AllocConsole();\n    g_hOutput = GetStdHandle(STD_OUTPUT_HANDLE);\n    // 注册窗口类\n    WNDCLASS wc = { 0 };\n    wc.cbClsExtra = 0;\n    wc.cbWndExtra = 0;\n    wc.hbrBackground = (HBRUSH)(COLOR_WINDOW + 1);\n    wc.hCursor = nullptr;\n    wc.hIcon = nullptr;\n    wc.hInstance = hInstance;\n    wc.lpfnWndProc = WndProc;\n    wc.lpszClassName = "Main";\n    wc.lpszMenuName = nullptr;\n    wc.style = CS_HREDRAW | CS_VREDRAW | CS_DBLCLKS;\n\n    RegisterClass(&wc);\n\n    //在内存中创建窗口\n    char* pszText = (char*)"hello data";\n    HWND hWnd = CreateWindowEx(0, "Main", "Window", WS_OVERLAPPEDWINDOW, 100, 100, 500, 500, nullptr, nullptr, hInstance, pszText);\n    //显示窗口\n    ShowWindow(hWnd, SW_SHOW);\n    UpdateWindow(hWnd);\n    // 消息循环，避免窗口消失\n    MSG nMsg = { nullptr };\n    while (GetMessage(&nMsg, nullptr, 0, 0))\n    {\n        TranslateMessage(&nMsg);\n        //将消息交给窗口处理函数\n        DispatchMessage(&nMsg);\n    }\n    return 0;\n\n}\n\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br"),s("span",{staticClass:"line-number"},[n._v("34")]),s("br"),s("span",{staticClass:"line-number"},[n._v("35")]),s("br"),s("span",{staticClass:"line-number"},[n._v("36")]),s("br"),s("span",{staticClass:"line-number"},[n._v("37")]),s("br"),s("span",{staticClass:"line-number"},[n._v("38")]),s("br"),s("span",{staticClass:"line-number"},[n._v("39")]),s("br"),s("span",{staticClass:"line-number"},[n._v("40")]),s("br"),s("span",{staticClass:"line-number"},[n._v("41")]),s("br"),s("span",{staticClass:"line-number"},[n._v("42")]),s("br"),s("span",{staticClass:"line-number"},[n._v("43")]),s("br"),s("span",{staticClass:"line-number"},[n._v("44")]),s("br"),s("span",{staticClass:"line-number"},[n._v("45")]),s("br"),s("span",{staticClass:"line-number"},[n._v("46")]),s("br"),s("span",{staticClass:"line-number"},[n._v("47")]),s("br"),s("span",{staticClass:"line-number"},[n._v("48")]),s("br"),s("span",{staticClass:"line-number"},[n._v("49")]),s("br"),s("span",{staticClass:"line-number"},[n._v("50")]),s("br"),s("span",{staticClass:"line-number"},[n._v("51")]),s("br"),s("span",{staticClass:"line-number"},[n._v("52")]),s("br"),s("span",{staticClass:"line-number"},[n._v("53")]),s("br"),s("span",{staticClass:"line-number"},[n._v("54")]),s("br"),s("span",{staticClass:"line-number"},[n._v("55")]),s("br"),s("span",{staticClass:"line-number"},[n._v("56")]),s("br"),s("span",{staticClass:"line-number"},[n._v("57")]),s("br"),s("span",{staticClass:"line-number"},[n._v("58")]),s("br"),s("span",{staticClass:"line-number"},[n._v("59")]),s("br"),s("span",{staticClass:"line-number"},[n._v("60")]),s("br"),s("span",{staticClass:"line-number"},[n._v("61")]),s("br"),s("span",{staticClass:"line-number"},[n._v("62")]),s("br"),s("span",{staticClass:"line-number"},[n._v("63")]),s("br"),s("span",{staticClass:"line-number"},[n._v("64")]),s("br"),s("span",{staticClass:"line-number"},[n._v("65")]),s("br"),s("span",{staticClass:"line-number"},[n._v("66")]),s("br"),s("span",{staticClass:"line-number"},[n._v("67")]),s("br"),s("span",{staticClass:"line-number"},[n._v("68")]),s("br"),s("span",{staticClass:"line-number"},[n._v("69")]),s("br"),s("span",{staticClass:"line-number"},[n._v("70")]),s("br"),s("span",{staticClass:"line-number"},[n._v("71")]),s("br"),s("span",{staticClass:"line-number"},[n._v("72")]),s("br"),s("span",{staticClass:"line-number"},[n._v("73")]),s("br"),s("span",{staticClass:"line-number"},[n._v("74")]),s("br"),s("span",{staticClass:"line-number"},[n._v("75")]),s("br"),s("span",{staticClass:"line-number"},[n._v("76")]),s("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);